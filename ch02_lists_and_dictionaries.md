# 2ì¥. ë¦¬ìŠ¤íŠ¸ì™€ ë”•ì…”ë„ˆë¦¬

ë§ì€ í”„ë¡œê·¸ë¨ì€ ì‚¬ëŒë³´ë‹¤ ê¸°ê³„ê°€ í•˜ê¸°ì— ë” ì í•©í•œ ë°˜ë³µì ì¸ ì‘ì—…ì„ ìë™í™”í•˜ê³ ì ë§Œë“¤ì–´ì¡Œë‹¤. íŒŒì´ì¬ì—ì„œëŠ” ì´ëŸ° ì‘ì—…ì„ ì¡°ì§ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ë¦¬ìŠ¤íŠ¸ íƒ€ì…ì„ ì“°ëŠ” ê²ƒì´ë‹¤.

ë¦¬ìŠ¤íŠ¸ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì™„í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì´ ë”•ì…”ë„ˆë¦¬ íƒ€ì…ì´ë‹¤. ë”•ì…”ë„ˆë¦¬ íƒ€ì…ì€ ê²€ìƒ‰ì— ì‚¬ìš©í•  í‚¤ì™€ í‚¤ì— ì—°ê´€ëœ ê°’ì„ ì €ì¥í•œë‹¤. (ì¼ë°˜ì ìœ¼ë¡œ í•´ì‹œ í…Œì´ë¸”(hash table)ì´ë‚˜ ì—°ê´€ ë°°ì—´(associative array)ì´ë¼ ë¶€ë¥´ëŠ” ë°ì´í„° êµ¬ì¡° ì•ˆì— ê°’ì„ ì €ì¥í•œë‹¤) ë”•ì…”ë„ˆë¦¬ëŠ” (ë¶„í™œìƒí™˜ ë³µì¡ë„ë¡œ) ìƒìˆ˜ ì‹œê°„ì— ì›ì†Œë¥¼ ì‚½ì…í•˜ê³  ì°¾ì„ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë™ì ì¸ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°ëŠ” ë”•ì…”ë„ˆë¦¬ê°€ ê°€ì¥ ì´ìƒì ì´ë‹¤.

## 11. ì‹œí€€ìŠ¤ë¥¼ ìŠ¬ë¼ì´ì‹±í•˜ëŠ” ë°©ë²•ì„ ìµí˜€ë¼.

íŒŒì´ì¬ì—ëŠ” ì‹œí€€ìŠ¤ë¥¼ ì—¬ëŸ¬ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ìŠ¬ë¼ì´ì‹± êµ¬ë¬¸ì´ ìˆë‹¤. ìŠ¬ë¼ì´ì‹±ì„ ì‚¬ìš©í•˜ë©´ ìµœì†Œí•œì˜ ë…¸ë ¥ìœ¼ë¡œ ì‹œí€€ìŠ¤ì— ë“¤ì–´ ì‡ëŠ” ì•„ì´í…œì˜ ë¶€ë¶„ì§‘í•©ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. íŠ¹ì •í•œ íŒŒì´ì¬ í´ë˜ìŠ¤ì—ë„ `__getitem__`ê³¼ `__setitem__`ìœ¼ë¡œ íŠ¹ë³„ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.

ìŠ¬ë¼ì´ì‹± êµ¬ë¬¸ì˜ ê¸°ë³¸ í˜•íƒœëŠ” ë¦¬ìŠ¤íŠ¸[ì‹œì‘:ë]ì´ë‹¤. ì—¬ê¸°ì„œ ì‹œì‘ ì¸ë±ìŠ¤ì— ìˆëŠ” ì›ì†ŒëŠ” ìŠ¬ë¼ì´ìŠ¤ì— í¬í•¨ë˜ì§€ë§Œ, ë ì¸ë±ìŠ¤ì— ìˆëŠ” ì›ì†ŒëŠ” í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.

- ë¦¬ìŠ¤íŠ¸ì˜ ë§¨ ì•ë¶€í„° ìŠ¬ë¼ì´ì‹±í•  ë•ŒëŠ” ì‹œê°ì  ì¡ìŒì„ ì—†ì• ê¸° ìœ„í•´ 0ì„ ìƒëµí•´ì•¼ í•œë‹¤.
- ë¦¬ìŠ¤íŠ¸ì˜ ëê¹Œì§€ ìŠ¬ë¼ì´ì‹±í•  ë•ŒëŠ” ì“¸ë°ì—†ì´ ë ì¸ë±ìŠ¤ë¥¼ ì ì§€ ë§ë¼.
- ë¦¬ìŠ¤íŠ¸ì˜ ëì—ì„œë¶€í„° ì›ì†Œë¥¼ ì°¾ê³  ì‹¶ì„ ë•ŒëŠ” ìŒìˆ˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

íŠ¹íˆ ìŠ¬ë¼ì´ì‹±í•  ë•Œ ë¦¬ìŠ¤íŠ¸ì˜ ì¸ë±ìŠ¤ ë²”ìœ„ë¥¼ ë„˜ì–´ê°€ëŠ” ì‹œì‘ê³¼ ë ì¸ë±ìŠ¤ëŠ” ì¡°ìš©íˆ ë¬´ì‹œëœë‹¤. ì´ëŸ° ë™ì‘ ë°©ì‹ìœ¼ë¡œ Input ë™ì‘ì„ ë‹¤ë£° ë•Œ ì›í•˜ëŠ” ìµœëŒ€ ê¸¸ì´ë¥¼ ì‰½ê²Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```python
first_twenty_items = a[:20]
last_twenty_items = a[-20:]
```

ë°˜ë©´ì— ê°™ì€ ì¸ë±ìŠ¤ì— ì§ì ‘ ì ‘ê·¼í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.

```python
>>> a[20]
Traceback ...
IndexError: list index out of range
```

ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¬ë¼ì´ì‹±í•œ ê²°ê³¼ëŠ” ì™„ì „íˆ ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ì´ë©°, ì›ë˜ ë¦¬ìŠ¤íŠ¸ì— ëŒ€í•œ ì°¸ì¡°ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ëœë‹¤. ì¦‰ ìŠ¬ë¼ì´ì‹±í•œ ê²°ê³¼ë¡œ ì–»ì€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³€ê²½í•´ë„ ì›ë˜ ë¦¬ìŠ¤íŠ¸ëŠ” ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.

```python
>>> a = ["a", "b", "c", "d", "e", "f", "g", "h"]
>>> b = a[3:]
>>> print(f"ì´ì „: {b}")
ì´ì „: ['d', 'e', 'f', 'g', 'h']
>>> b[1] = 99
>>> print(f"ì´í›„: {b}")
ì´í›„: ['d', 99, 'f', 'g', 'h']
>>> print(f"ë³€í™” ì—†ìŒ: {a}")
ë³€í™” ì—†ìŒ: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
```

ìŠ¬ë¼ì´ì‹±ì—ì„œ ì‹œì‘ê³¼ ë ì¸ë±ìŠ¤ë¥¼ ëª¨ë‘ ìƒëµí•˜ë©´ ì›ë˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³µì‚¬í•œ ìƒˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ì–»ëŠ”ë‹¤.

```python
>>> b = a
>>> b is a
True
>>> b = a[:]
>>> b is a
False
```

## 12. ìŠ¤íŠ¸ë¼ì´ë“œì™€ ìŠ¬ë¼ì´ìŠ¤ë¥¼ í•œ ì‹ì— í•¨ê»˜ ì‚¬ìš©í•˜ì§€ ë§ë¼.

ê¸°ë³¸ ìŠ¬ë¼ì´ì‹± ì™¸ì— íŒŒì´ì¬ì€ ë¦¬ìŠ¤íŠ¸[ì‹œì‘:ë:ì¦ê°€ê°’]ìœ¼ë¡œ ì¼ì •í•œ ê°„ê²©ì„ ë‘ê³  ìŠ¬ë¼ì´ì‹± í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ êµ¬ë¬¸ì„ ì œê³µí•œë‹¤. ì´ë¥¼ ìŠ¤íŠ¸ë¼ì´ë“œ(stride)ë¼ê³  í•œë‹¤.

ìŠ¤íŠ¸ë¼ì´ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì‹œí€€ìŠ¤ë¥¼ ìŠ¬ë¼ì´ì‹±í•˜ë©´ì„œ ë§¤ në²ˆì§¸ ì›ì†Œë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ìŠ¤íŠ¸ë¼ì´ë“œë¥¼ ì‚¬ìš©í•´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì¸ë±ìŠ¤ê°€ ì§ìˆ˜ì¸ ê·¸ë£¹ê³¼ í™€ìˆ˜ì¸ ê·¸ë£¹ì„ ì‰½ê²Œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ, ìŠ¤íŠ¸ë¼ì´ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬ë¬¸ì€ ì¢…ì¢… ì˜ˆê¸°ì¹˜ ëª»í•œ ë™ì‘ì´ ì¼ì–´ë‚˜ì„œ ë²„ê·¸ë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ íŒŒì´ì¬ì—ì„œ ë°”ì´íŠ¸ ë¬¸ìì—´ì„ ì—­ìœ¼ë¡œ ë’¤ì§‘ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ê¸°ë²•ì€ -1ì„ ì¦ê°€ê°’ìœ¼ë¡œ ì‚¬ìš©í•´ ë¬¸ìì—´ì„ ìŠ¬ë¼ì´ì‹±í•˜ëŠ” ê²ƒì´ë‹¤.

```python
>>> x = b'mongoose'
>>> y = x[::-1]
>>> print(y)
b'esoognom'
```

ìœ ë‹ˆì½”ë“œ ë¬¸ìì—´ì—ì„œë„ ë¬¼ë¡  ì´ëŸ° ê¸°ë²•ì´ ì˜ ì‘ë™í•œë‹¤. í•˜ì§€ë§Œ, ìœ ë‹ˆì½”ë“œ ë°ì´í„°ë¥¼ UTF-8ë¡œ ì¸ì½”ë”©í•œ ë¬¸ìì—´ì—ì„œëŠ” ì´ ì½”ë“œê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.

ê·¸ëŸ¼ -1 ë§ê³  ë‹¤ë¥¸ ìŒìˆ˜ ì¦ê°€ê°’ì€ ìœ ìš©í• ê¹Œ?

```python
>>> x = ["a", "b", "c", "d", "e", "f", "g", "h"]
>>> x[::2]
['a', 'c', 'e', 'g']
>>> x[::-2]
['h', 'f', 'd', 'b']
```

ì—¬ê¸°ì„œ `::2`ëŠ” â€˜ì‹œì‘ë¶€í„° ë§¤ ë‘ ë²ˆì§¸ ì›ì†Œë¥¼ ì„ íƒí•œë‹¤â€™ëŠ” ëœ»ì´ë‹¤. ë˜í•œ, `::-2`ëŠ” â€˜ëì—ì„œ ì‹œì‘í•´ ì•ìœ¼ë¡œ ê°€ë©´ì„œ ë§¤ ë‘ ë²ˆì§¸ ì›ì†Œë¥¼ ì„ íƒí•œë‹¤â€™ëŠ” ëœ»ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ `2::2`ëŠ” ë¬´ìŠ¨ ëœ»ì¼ê¹Œ? ê·¸ë¦¬ê³  `-2::-2`, `-2:2:-2`, `2:2:-2` ì‚¬ì´ì—ëŠ” ì–´ë–¤ ì°¨ì´ê°€ ìˆì„ê¹Œ?

ì¤‘ìš”í•œ ì ì€ ìŠ¬ë¼ì´ì‹± êµ¬ë¬¸ì— ìŠ¤íŠ¸ë¼ì´ë”©ê¹Œì§€ ë“¤ì–´ê°€ë©´ ì•„ì£¼ í˜¼ë€ìŠ¤ëŸ½ë‹¤ëŠ” ê²ƒì´ë‹¤. ê° ê´„í˜¸ ì•ˆì— ìˆ˜ê°€ ì„¸ ê°œë‚˜ ë“¤ì–´ ìˆìœ¼ë©´ ì½”ë“œ ë°€ë„ê°€ ë„ˆë¬´ ë†’ì•„ì„œ ì½ê¸° ì–´ë µë‹¤. ê²Œë‹¤ê°€ ì¦ê°€ê°’ì— ë”°ë¼ ì‹œì‘ê°’ê³¼ ëê°’ì´ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ë¶ˆë¶„ëª…í•˜ë‹¤. ì´ëŸ° ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‹œì‘ê°’ì´ë‚˜ ëê°’ì„ ì¦ê°€ê°’ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒì„ ê¶Œí•œë‹¤.

ì‹œì‘ì´ë‚˜ ë ì¸ë±ìŠ¤ì™€ í•¨ê»˜ ì¦ê°€ê°’ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´, ìŠ¤íŠ¸ë¼ì´ë”©í•œ ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ëŒ€ì…í•œ ë‹¤ìŒ ìŠ¬ë¼ì´ì‹±í•˜ë¼.

```python
>>> y = x[::2]
>>> z = y[1:-1]
```

í”„ë¡œê·¸ë¨ì´ ì´ ë‘ ë‹¨ê³„ ì—°ì‚°ì— í•„ìš”í•œ ì‹œê°„ê³¼ ë©”ëª¨ë¦¬ë¥¼ ê°ë‹¹í•  ìˆ˜ ì—†ë‹¤ë©´, itertools ë‚´ì¥ ëª¨ë“ˆì˜ `islice` ë©”ì„œë“œë¥¼ ê³ ë ¤í•˜ë¼.

## 13. ìŠ¬ë¼ì´ì‹±ë³´ë‹¤ëŠ” ë‚˜ë¨¸ì§€ ëª¨ë‘ ì¡ì•„ë‚´ëŠ” ì–¸íŒ¨í‚¹ì„ ì‚¬ìš©í•˜ë¼.

ê¸°ë³¸ ì–¸íŒ¨í‚¹ì˜ í•œ ê°€ì§€ í•œê³„ì ì€ ì–¸íŒ¨í‚¹í•  ì‹œí€€ìŠ¤ì˜ ê¸¸ì´ë¥¼ ë¯¸ë¦¬ ì•Œê³  ìˆì–´ì•¼í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

```python
>>> car_ages = [0, 9, 4, 8, 7, 20, 19, 1, 6, 15]
>>> car_ages_descending = sorted(car_ages, reverse=True)
>>> oldest, second_oldest = car_ages_descending
Traceback ...
ValueError: too many values to unpack (expected 2)
```

ì´ë ‡ë“¯ ê¸°ë³¸ ì–¸íŒ¨í‚¹ìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ ë§¨ ì•ì—ì„œ ì›ì†Œë¥¼ ë‘ ê°œ ê°€ì ¸ì˜¤ë©´ ì‹¤í–‰ ì‹œì ì— ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. íŒŒì´ì¬ì„ ì²˜ìŒ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì€ ì´ëŸ° ìƒí™©ì—ì„œ ì¸ë±ìŠ¤ì™€ ìŠ¬ë¼ì´ì‹±ì„ ìì£¼ ì‚¬ìš©í•œë‹¤.

```python
>>> oldest = car_ages_descending[0]
>>> second_oldest = car_ages_descending[1]
>>> others = car_ages_descending[2:]
>>> print(oldest, second_oldest, others)
20 19 [15, 9, 8, 7, 6, 4, 1, 0]
```

ë¬¼ë¡  ì½”ë“œëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ëª¨ë“  ì¸ë±ìŠ¤ì™€ ìŠ¬ë¼ì´ìŠ¤ë¡œ ì¸í•´ ì‹œê°ì  ì¡ìŒì´ ë§ë‹¤. ì‹¤ì œë¡œ ì´ëŸ° ì‹ìœ¼ë¡œ ì‹œí€€ìŠ¤ì˜ ì›ì†Œë¥¼ ì—¬ëŸ¬ í•˜ìœ„ ì§‘í•©ìœ¼ë¡œ ë‚˜ëˆ„ë©´ 1 ì°¨ì´ ë‚˜ëŠ” ì¸ë±ìŠ¤ë¡œ ì¸í•œ ì˜¤ë¥˜(off-by-one error)ë¥¼ ë§Œë“¤ì–´ë‚´ê¸° ì‰½ë‹¤.

ì´ëŸ° ìƒí™©ì„ ë” ì˜ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ íŒŒì´ì¬ì€ **ë³„í‘œ ì‹**(starred expression)ì„ ì‚¬ìš©í•´ ëª¨ë“  ê°’ì„ ë‹´ëŠ” ì–¸íŒ¨í‚¹ì„ í•  ìˆ˜ ìˆê²Œ ì§€ì›í•œë‹¤.

```python
>>> oldest, second_oldest, *others = car_ages_descending
>>> print(oldest, second_oldest, others)
20 19 [15, 9, 8, 7, 6, 4, 1, 0]
```

ë” ì›ê³ , ì½ê¸° ì‰½ê³ , ì—¬ëŸ¬ ì¤„ ì‚¬ì´ì— ì¸ë±ìŠ¤ ê²½ê³„ ê°’ì´ ì–´ê¸‹ë‚˜ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ì—¬ì§€ë„ ì—†ë‹¤.

## 14. ë³µì¡í•œ ê¸°ì¤€ì„ ì‚¬ìš©í•´ ì •ë ¬í•  ë•ŒëŠ” key íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ë¼.

list ë‚´ì¥ íƒ€ì…ì—ëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì›ì†Œë¥¼ ì—¬ëŸ¬ ê¸°ì¤€ì— ë”°ë¼ ì •ë ¬í•  ìˆ˜ ìˆëŠ” sort ë©”ì„œë“œê°€ ë“¤ì–´ ìˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ sortëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ ì›ì†Œ íƒ€ì…ì— ë”°ë¥¸ ìì—°ìŠ¤ëŸ¬ìš´ ìˆœì„œë¥¼ ì‚¬ìš©í•´ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•œë‹¤.

```python
>>> numbers = [93, 86, 11, 68, 70]
>>> numbers.sort()
>>> print(numbers)
[11, 68, 70, 86, 93]
```

sort ë©”ì„œë“œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ìˆœì„œë¥¼ ì •í•  ìˆ˜ ìˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë‚´ì¥ íƒ€ì…(ë¬¸ìì—´, ë¶€ë™ì†Œìˆ˜ì  ë“±)ì—ì„œ ì˜ ì‘ë™í•œë‹¤.

ê·¸ëŸ¼, sortëŠ” ê°ì²´ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í• ê¹Œ?

```python
class Tool:
	def __init__(self, name, weight):
		self.name = name
		self.weight = weight

	def __repr__(self):
		return f"Tool({self.name}, {self.weight})"

tools = [
	Tool("ìˆ˜ì¤€ê³„", 3.5),
	Tool("í•´ë¨¸", 1.25),
	Tool("ìŠ¤í¬ë¥˜ë“œë¼ì´ë²„", 0.5),
	Tool("ëŒ", 0.25),
]

>>> tools.sort()
Traceback ...
TypeError: '<' not supported between instances of 'Tool' and 'Tool'
```

sort ë©”ì„œë“œê°€ í˜¸ì¶œí•˜ëŠ” ê°ì²´ ë¹„êµ íŠ¹ë³„ ë©”ì„œë“œê°€ ì •ì˜ë¼ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ ì´ëŸ° íƒ€ì…ì˜ ê°ì²´ëŠ” ì •ë ¬í•  ìˆ˜ ì—†ë‹¤. ë§Œì•½, í´ë˜ìŠ¤ì— ì •ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ìˆœì„œê°€ ìˆì–´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” í•„ìš”í•œ íŠ¹ë³„ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ë©´ ë³„ë„ì˜ ì¸ìë¥¼ ë„˜ê¸°ì§€ ì•Šê³  sortë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.

ì •ë ¬ì— ì‚¬ìš©í•˜ê³  ì‹¶ì€ ì• íŠ¸ë¦¬ë·°íŠ¸ê°€ ê°ì²´ì— ë“¤ì–´ ìˆëŠ” ê²½ìš°ê°€ ë§ê³ , ì´ëŸ° ìƒí™©ì„ ì§€ì›í•˜ê¸° ìœ„í•´ sortì—ëŠ” keyë¼ëŠ” íŒŒë¼ë¯¸í„°ê°€ ì¡´ì¬í•œë‹¤. ì—¬ê¸°ì„œ keyëŠ” í•¨ìˆ˜ì—¬ì•¼ í•œë‹¤.

```python
>>> print("before:", repr(tools))
before: [Tool(ìˆ˜ì¤€ê³„, 3.5), Tool(í•´ë¨¸, 1.25), Tool(ìŠ¤í¬ë¥˜ë“œë¼ì´ë²„, 0.5), Tool(ëŒ, 0.25)]
>>> tools.sort(key=lambda x: x.name)
>>> print("after: ", repr(tools))
after:  [Tool(ëŒ, 0.25), Tool(ìˆ˜ì¤€ê³„, 3.5), Tool(ìŠ¤í¬ë¥˜ë“œë¼ì´ë²„, 0.5), Tool(í•´ë¨¸, 1.25)]
```

nameê³¼ ë§ˆì°¬ê°€ì§€ë¡œ weightì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ë„ ê°€ëŠ¥í•˜ë‹¤.

ì´ì²˜ëŸ¼ keyë¡œ ì „ë‹¬ëœ ëŒë‹¤ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” ì›ì†Œ ì• íŠ¸ë¦¬ë·°íŠ¸ì— ì ‘ê·¼í•˜ê±°ë‚˜ ì¸ë±ìŠ¤ë¥¼ ì¨ì„œ ê°’ì„ ì–»ê±°ë‚˜, ë™ì‘í•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“  ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë§Œì•½, weightìœ¼ë¡œ ë¨¼ì € ì •ë ¬í•œ ë‹¤ìŒì— nameìœ¼ë¡œ ì •ë ¬í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ? íŒŒì´ì¬ì—ì„œ ê°€ì¥ ì‰¬ìš´ í•´ë²•ì€ tuple íƒ€ì…ì„ ì“°ëŠ” ê²ƒì´ë‹¤. íŠœí”Œì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¹„êµ ê°€ëŠ¥í•˜ë©° ìì—°ìŠ¤ëŸ¬ìš´ ìˆœì„œê°€ ì •í•´ì ¸ ìˆë‹¤. ì´ëŠ” sortì— í•„ìš”í•œ `__lt__` ì •ì˜ê°€ ë“¤ì–´ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.

```python
tools = [
	Tool("ìˆ˜ì¤€ê³„", 3.5),
	Tool("í•´ë¨¸", 3.5),
	Tool("ìŠ¤í¬ë¥˜ë“œë¼ì´ë²„", 0.5),
	Tool("ëŒ", 0.25),
]

>>> print("before:", repr(tools))
before: [Tool(ìˆ˜ì¤€ê³„, 3.5), Tool(í•´ë¨¸, 3.5), Tool(ìŠ¤í¬ë¥˜ë“œë¼ì´ë²„, 0.5), Tool(ëŒ, 0.25)]
>>> tools.sort(key=lambda x: (x.name, x.weight))
>>> print("after: ", repr(tools))
after:  [Tool(ëŒ, 0.25), Tool(ìˆ˜ì¤€ê³„, 3.5), Tool(ìŠ¤í¬ë¥˜ë“œë¼ì´ë²„, 0.5), Tool(í•´ë¨¸, 3.5)]
```

ê·¸ë ‡ë‹¤ë©´, ì •ë ¬ ì¡°ê±´ì´ ë™ì¼í•œ ê°’ì€ ì–´ë–»ê²Œ ë ê¹Œ? íŒŒì´ì¬ì—ì„œëŠ” ì´ëŸ° ìƒí™©ì„ ìœ„í•´ **ì•ˆì •ì ì¸**(stable) ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì„ ì œê³µí•œë‹¤. ì¦‰ ë¦¬ìŠ¤íŠ¸ íƒ€ì…ì˜ sort ë©”ì„œë“œëŠ” key í•¨ìˆ˜ê°€ ë³€í™˜í•˜ëŠ” ê°’ì´ ì„œë¡œ ê°™ì€ ê²½ìš° ë¦¬ìŠ¤íŠ¸ì— ë“¤ì–´ ìˆë˜ ì›ë˜ ìˆœì„œë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•´ì¤€ë‹¤.

## 15. ë”•ì…”ë„ˆë¦¬ ì‚½ì… ìˆœì„œì— ì˜ì¡´í•  ë•ŒëŠ” ì¡°ì‹¬í•˜ë¼.

íŒŒì´ì¬ 3.5 ì´ì „ì—ëŠ” ë”•ì…”ë„ˆë¦¬ì— ëŒ€í•´ ì´í„°ë ˆì´ì…˜ì„ ìˆ˜í–‰í•˜ë©´ í‚¤ë¥¼ ì„ì˜ì˜ ìˆœì„œë¡œ ëŒë ¤ì¤¬ìœ¼ë©°, ì´í„°ë ˆì´ì…˜ ìˆœì„œëŠ” ì›ì†Œê°€ ì‚½ì…ëœ ìˆœì„œì™€ ì¼ì¹˜í•˜ì§€ ì•Šì•˜ë‹¤.

```python
# python 3.5
baby_names = {
    "cat": "kitten",
    "dog": "puppy",
}

>>> print(baby_names)
{"dog": "puppy", "cat": "kitten"}
```

ì´ëŸ° ì¼ì´ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” ì˜ˆì „ì˜ ë”•ì…”ë„ˆë¦¬ êµ¬í˜„ì´ ë‚´ì¥ hash í•¨ìˆ˜ì™€ íŒŒì´ì¬ ì¸í„°í”„ë¦¬í„°ê°€ ì‹œì‘í•  ë•Œ ì´ˆê¸°í™”ë˜ëŠ” ë‚œìˆ˜ seedë¥¼ ì‚¬ìš©í•˜ëŠ” í•´ì‹œ í…Œì´ë¸” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì´ë‹¤.

í•˜ì§€ë§Œ, íŒŒì´ì¬ 3.6ë¶€í„°ëŠ” ë”•ì…”ë„ˆë¦¬ê°€ ì‚½ì… ìˆœì„œë¥¼ ë³´ì¡´í•˜ë„ë¡ ë™ì‘ì´ ê°œì„ ëê³ , íŒŒì´ì¬ 3.7ë¶€í„°ëŠ” ì•„ì˜ˆ íŒŒì´ì¬ ì–¸ì–´ ëª…ì„¸ì— ì´ ë‚´ìš©ì´ í¬í•¨ëë‹¤.

```python
# after python 3.7
baby_names = {
    "cat": "kitten",
    "dog": "puppy",
}

>>> print(baby_names)
{"cat": "kitten", "dog": "puppy"}
```

ë”•ì…”ë„ˆë¦¬ê°€ ì‚½ì… ìˆœì„œë¥¼ ìœ ì§€í•˜ëŠ” ë°©ì‹ì€ ì´ì œ íŒŒì´ì¬ ì–¸ì–´ ëª…ì„¸ì˜ ì¼ë¶€ê°€ ëë‹¤.

> ğŸ’¡ **OrderedDict vs dict**  
> collections ë‚´ì¥ ëª¨ë“ˆì— ì‚½ì… ìˆœì„œë¥¼ ìœ ì§€í•´ì£¼ëŠ” OrderedDictê°€ ì¡´ì¬í–ˆê³ , python 3.7 ì´í›„ë¶€í„°ëŠ” í‘œì¤€ dictì˜ ë™ì‘ê³¼ ë¹„ìŠ·í•˜ê¸°ëŠ” í•˜ì§€ë§Œ OrderedDictì™€ dictëŠ” ì„±ëŠ¥ íŠ¹ì„±ì´ ë§ì´ ë‹¤ë¥´ë‹¤.  
> ë§Œì•½ í‚¤ ì‚½ì…ê³¼ popitem í˜¸ì¶œì´ ë¹ˆë²ˆí•˜ë‹¤ë©´ OrderedDictê°€ ì„±ëŠ¥ì ìœ¼ë¡œ ë” ë‚«ë‹¤.

í•˜ì§€ë§Œ ë”•ì…”ë„ˆë¦¬ ì²˜ë¦¬ ì‹œ ì‚½ì… ìˆœì„œ ë™ì‘ì´ í•­ìƒ ì„±ë¦½í•œë‹¤ê³  ê°€ì •í•˜ë©´ ì•ˆëœë‹¤. íŒŒì´ì¬ì—ì„œëŠ” ê°œë°œìê°€ list, dict ë“±ì˜ í‘œì¤€ **í”„ë¡œí† ì½œ**(protocol)ì„ í‰ë‚´ë‚´ëŠ” ì»¤ìŠ¤í…€ ì»¨í…Œì´ë„ˆ íƒ€ì…ì„ ì‰½ê²Œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

íŒŒì´ì¬ì€ ì •ì  íƒ€ì… ì§€ì • ì–¸ì–´ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì½”ë“œëŠ” ì—„ê²©í•œ í´ë˜ìŠ¤ ê³„ì¸µë³´ë‹¤ëŠ” ê°ì²´ì˜ ë™ì‘ì´ ê°ì²´ì˜ ì‹¤ì§ˆì ì¸ íƒ€ì…ì„ ê²°ì •í•˜ëŠ” **ë• íƒ€ì´í•‘**ì— ì˜ì¡´í•˜ë©° ì´ë¡œ ì¸í•´ ê°€ë” ì–´ë ¤ìš´ í•¨ì •ì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤.

## 16. inì„ ì‚¬ìš©í•˜ê³  ë”•ì…”ë„ˆë¦¬ í‚¤ê°€ ì—†ì„ ë•Œ KeyErrorë¥¼ ì²˜ë¦¬í•˜ê¸°ë³´ë‹¤ëŠ” getì„ ì‚¬ìš©í•˜ë¼.

ë”•ì…”ë„ˆë¦¬ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ì„¸ ê°€ì§€ ê¸°ë³¸ ì—°ì‚°ì€ í‚¤ë‚˜ í‚¤ì— ì—°ê´€ëœ ê°’ì— ì ‘ê·¼í•˜ê³ , ëŒ€ì…í•˜ê³ , ì‚­ì œí•˜ëŠ” ê²ƒì´ë‹¤. ë”•ì…”ë„ˆë¦¬ì˜ ë‚´ìš©ì€ ë™ì ì´ë¯€ë¡œ ì–´ë–¤ í‚¤ì— ì ‘ê·¼í•˜ê±°ë‚˜ í‚¤ë¥¼ ì‚­ì œí•  ë•Œ ê·¸ í‚¤ê°€ ë”•ì…”ë„ˆë¦¬ê°€ ì—†ì„ ìˆ˜ ìˆë‹¤.

```python
counters = {
    'pumpernickel': 2,
    'sourdough': 1
}
```

ì—¬ê¸°ì„œ ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚¤ë ¤ë©´ ë¨¼ì € í‚¤ê°€ ë”•ì…”ë„ˆë¦¬ì— ì¡´ì¬í•˜ëŠ”ì§€ ì‚´í´ë³¸ í›„, í‚¤ê°€ ì—†ìœ¼ë©´ ë””í´íŠ¸ ì¹´ìš´í„° ê°’ì¸ 0ì„ ë”•ì…”ë„ˆë¦¬ì— ë„£ê³  ê·¸ ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œì¼œì•¼í•œë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì²˜ë¦¬í•  ê²½ìš° í‚¤ë¥¼ ë‘ ë²ˆ ì½ê³ , í‚¤ì— ëŒ€í•œ ê°’ì„ í•œ ë²ˆ ëŒ€ì…í•´ì•¼ í•œë‹¤.

```python
key = 'wheat'

if key in counters:
    count = counters[key]
else:
    count = 0

>>> counters[key] = count + 1
```

í˜¹ì€ KeyError ì˜ˆì™¸ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ í‚¤ë¥¼ í•œ ë²ˆë§Œ ì½ê³ , ê°’ì„ í•œ ë²ˆë§Œ ëŒ€ì…í•˜ë©´ ë˜ë¯€ë¡œ ë” íš¨ìœ¨ì ì´ë‹¤.

```python
try:
    count = counters[key]
except KeyError:
    count = 0
```

ë”•ì…”ë„ˆë¦¬ì—ì„œëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ í‚¤ê°€ ì¡´ì¬í•˜ë©´ ê·¸ ê°’ì„ ê°€ì ¸ì˜¤ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë””í´íŠ¸ ê°’ì„ ë°˜í™˜í•˜ëŠ” íë¦„ì´ ê½¤ ìì£¼ ì¼ì–´ë‚œë‹¤. ê·¸ë˜ì„œ dict ë‚´ì¥ íƒ€ì…ì—ëŠ” ì´ëŸ° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” get ë©”ì„œë“œê°€ ë“¤ì–´ ìˆë‹¤.

```python
counters[key] = counters.get(key, 0) + 1
```

ë§Œì•½, ë”•ì…”ë„ˆë¦¬ì— ì§€ì •ëœ ê°’ì´ ë¦¬ìŠ¤íŠ¸ì²˜ëŸ¼ ë” ë³µì¡í•œ ê°’ì´ë¼ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?

```python
votes = {
    "baguette": ["Bob", "Alice"],
    "ciabatta": ["Coco", "Deb"],
}

key = "brioche"
who = "Elmer"

if key in votes:
		names = votes[key]
else:
		votes[key] = names = []

>>> names.append(who)
```

ì—¬ê¸°ì„œ ì´ì¤‘ ëŒ€ì…ë¬¸ì¸ `votes[key] = names = []` ëŠ” í‚¤ ëŒ€ì…ì„ ë‘ ì¤„ì´ ì•„ë‹ˆë¼ í•œ ì¤„ë¡œ ì²˜ë¦¬í•œë‹¤.

ë””í´íŠ¸ ê°’ìœ¼ë¡œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë”•ì…”ë„ˆë¦¬ì— ë„£ê³  ë‚˜ë©´ ì°¸ì¡°ë¥¼ í†µí•´ ë¦¬ìŠ¤íŠ¸ ë‚´ìš©ì„ ë³€ê²½í•  ìˆ˜ ìˆì–´, appendë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ë”•ì…”ë„ˆë¦¬ì— ëŒ€ì…í•  í•„ìš”ê°€ ì—†ë‹¤.

getì„ ì´ìš©í•œ ë°©ë²•ìœ¼ë¡œ ê°œì„ ì´ ê°€ëŠ¥í•˜ë‹¤.

```python
if (names := votes.get(key)) is None:
		votes[key] = names = []

>>> names.append(who)
```

í•˜ì§€ë§Œ dict íƒ€ì…ì€ ì´ íŒ¨í„´ì„ ë” ê°„ë‹¨íˆ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” setdefault ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤. setdefaultëŠ” ë”•ì…”ë„ˆë¦¬ì— í‚¤ë¥¼ ì‚¬ìš©í•´ ê°’ì„ ê°€ì ¸ì˜¤ë ¤ê³  ì‹œë„í•œë‹¤. ì´ ë©”ì„œë“œëŠ” í‚¤ê°€ ì—†ìœ¼ë©´ ì œê³µë°›ì€ ë””í´íŠ¸ ê°’ì„ í‚¤ì— ì—°ê´€ì‹œì¼œ ë”•ì…”ë„ˆë¦¬ì— ëŒ€ì…í•œ ë‹¤ìŒ, í‚¤ì— ì—°ê´€ëœ ê°’ì„ ë°˜í™˜í•œë‹¤.

```python
names = votes.setdefault(key, [])
names.append(who)
```

getê³¼ ëŒ€ì…ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ì§§ë‹¤. í•˜ì§€ë§Œ ì´ ì ‘ê·¼ ë°©ë²•ì€ ê°€ë…ì„±ì´ ê·¸ë‹¤ì§€ ì¢‹ì§€ ì•Šë‹¤. ë©”ì„œë“œ ì´ë¦„ì¸ setdefaultëŠ” ì´ ë©”ì„œë“œì˜ ë™ì‘ì„ ì§ì ‘ì ìœ¼ë¡œ ë¶„ëª…íˆ ë“œëŸ¬ë‚´ì§€ ëª»í•œë‹¤. ë§Œì•½ ì´ë ‡ë“¯ setdefaultë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë”•ì…”ë„ˆë¦¬ í‚¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì§€ë¦„ê¸¸ì¸ ê²½ìš°, setdefaultë³´ë‹¤ëŠ” defaultdictë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¶©ë¶„í•  ìˆ˜ ìˆë‹¤.

## 17. ë‚´ë¶€ ìƒíƒœì—ì„œ ì›ì†Œê°€ ì—†ëŠ” ê²½ìš°ë¥¼ ì²˜ë¦¬í•  ë•ŒëŠ” setdefaultë³´ë‹¤ defaultdictë¥¼ ì‚¬ìš©í•˜ë¼.

ì§ì ‘ ë§Œë“¤ì§€ ì•Šì€ ë”•ì…”ë„ˆëŸ¬ë¥¼ ë‹¤ë£° ë•Œ í‚¤ê°€ ì—†ëŠ” ê²½ìš° ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆë‹¤. getë©”ì„œë“œë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•, inê³¼ KeyError, ê²½ìš°ì— ë”°ë¼ì„œëŠ” setdefaultê°€ ê°€ì¥ ë¹ ë¥¸ ê¸¸ì¼ ìˆ˜ë„ ìˆë‹¤.

```python
visits = {
    'Mexico': {'Tulum', 'Puerto Vallarta'},
    'Japan': {'Hakone'},
}

>>> visits.setdefault('France', set()).add('Arles')

if (japan := visits.get('Japan')) is None:
    visits['Japan'] = japan = set()

>>> japan.add('Kyoto')
```

ì—¬ê¸°ì„œ ë§Œì•½ ì§ì ‘ ë”•ì…”ë„ˆë¦¬ ìƒì„±ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œ? ì˜ˆë¥¼ ë“¤ì–´ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ë”•ì…”ë„ˆë¦¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œê°€ ì´ëŸ° ê²½ìš°ì— í•´ë‹¹í•œë‹¤.

```python
class Visits:
    def __init__(self):
        self.data = {}

    def add(self, country, city):
        city_set = self.data.setdefault(country, set())
        city_set.add(city)
```

ìƒˆë¡œ ë§Œë“  í•´ë‹¹ í´ë˜ìŠ¤ëŠ” setdefault í˜¸ì¶œì˜ ë³µì¡ë„ë¥¼ ì œëŒ€ë¡œ ê°ì¶°ì£¼ë©°, ë” ë‚˜ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤.

```python
>>> visits = Visits()
>>> visits.add('Russia', 'Yekaterinburg')
>>> visits.add('Tajikistan', 'Dushanbe')
>>> print(visits.data)
{'Russia': {'Yekaterinburg'}, 'Tajikistan': {'Dushanbe'}}
```

í•˜ì§€ë§Œ visits.add ë©”ì„œë“œ êµ¬í˜„ì€ ì—¬ì „íˆ setdefaultë¼ëŠ” ë©”ì„œë“œ ì´ë¦„ì´ í—·ê°ˆë¦¬ê¸° ë•Œë¬¸ì— ì½”ë“œ ë™ì‘ì„ ë°”ë¡œ ì´í•´í•˜ê¸° ì–´ë µë‹¤. ì´ ë•Œ ì‚¬ìš© ê°€ëŠ¥í•œ í´ë˜ìŠ¤ë¡œ collections ë‚´ì¥ ëª¨ë“ˆì— ìˆëŠ” defaultdict í´ë˜ìŠ¤ê°€ ì¡´ì¬í•œë‹¤. defaultdict í´ë˜ìŠ¤ëŠ” í‚¤ê°€ ì—†ì„ ë•Œ ìë™ìœ¼ë¡œ ë””í´íŠ¸ ê°’ì„ ì €ì¥í•˜ì—¬ ì´ëŸ° ìš©ë²•ì„ ê°„ë‹¨íˆ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```python
from collections import defaultdict

class Visits:
    def __init__(self):
        self.data = defaultdict(set)

    def add(self, country, city):
        self.data[country].add(city)

>>> visits = Visits()
>>> visits.add('England', 'Bath')
>>> visits.add('England', 'London')
>>> print(visits.data)
defaultdict(<class 'set'>, {'England': {'London', 'Bath'}})
```

add ë©”ì„œë“œê°€ ì•„ì£¼ ë§ì´ í˜¸ì¶œë˜ë©´ ì§‘í•© ìƒì„±ì— ë”°ë¥¸ ë¹„ìš©ë„ ì»¤ì§€ì§€ë§Œ, ë¶ˆí•„ìš”í•œ setì´ ë§Œë“¤ì–´ì§€ëŠ” ê²½ìš°ê°€ ì—†ë‹¤.

## 18. `__missing__` ì„ ì‚¬ìš©í•´ í‚¤ì— ë”°ë¼ ë‹¤ë¥¸ ë””í´íŠ¸ ê°’ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë‘ë¼.

ë‚´ì¥ dict íƒ€ì…ì˜ setdefault ë©”ì„œë“œëŠ” í‚¤ê°€ ì—†ëŠ” ê²½ìš° ì§§ì€ ì½”ë“œë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ê·¸ ì¤‘ ëŒ€ë¶€ë¶„ì€ defaultdict í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ì²˜ë¦¬í•˜ëŠ”ë° ë” ìš©ì´í•˜ë‹¤. í•˜ì§€ë§Œ setdefaultë‚˜ defaultdict ëª¨ë‘ ì‚¬ìš©í•˜ê¸° ì ë‹¹í•˜ì§€ ì•Šì€ ê²½ìš°ë„ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ íŒŒì¼ ì‹œìŠ¤í…œì— ìˆëŠ” SNS í”„ë¡œí•„ ì‚¬ì§„ì„ ê´€ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•œë‹¤ê³  ê°€ì •í•  ë•Œ, í•„ìš”í•  ë•Œ íŒŒì¼ì„ ì½ê³  ì“°ê¸° ìœ„í•´ í”„ë¡œí•„ ì‚¬ì§„ì˜ ê²½ë¡œì™€ ì—´ë¦° íŒŒì¼ í•¸ë“¤ì„ ì—°ê´€ì‹œì¼œì£¼ëŠ” ë”•ì…”ë„ˆë¦¬ê°€ í•„ìš”í•˜ë‹¤.

```python
pictures = {}
path = 'profile_1234.png'

if (handle := pictures.get(path)) is None:
    try:
        handle = open(path, 'rb')
    except OSError:
        print('cannot open', path)
        raise
    else:
        pictures[path] = handle

>>> handle.seek(0)
>>> image_data = handle.read()
```

ìœ„ì™€ ê°™ì€ ë¡œì§ì€ êµ‰ì¥íˆ ë³µì¡í•˜ê³ , ë¡œì§ì´ ë³µì¡í•´ì§ˆìˆ˜ë¡ ë¸”ë¡ ê¹Šì´ê°€ ë” ê¹Šì–´ì§€ëŠ” ë‹¨ì ì´ ìˆë‹¤.

ì´ë ‡ë“¯ ë‚´ë¶€ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë ¤ í•œë‹¤ë©´ í”„ë¡œí•„ ì‚¬ì§„ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ defaultdictë¥¼ ì“¸ ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•  ìˆ˜ ìˆë‹¤.

```python
from collections import defaultdict

def open_picture(profile_path):
    try:
        return open(profile_path, 'a+b')
    except OSError:
        print(f"Can't open {profile_path}")
        raise

>>> pictures = defaultdict(open_picture)
>>> handle = pictures[path]
>>> handle.seek(0)
>>> handle.read()
Traceback ...
TypeError: open_picture() missing 1 required positional argument: 'profile_path'
```

ë¬¸ì œëŠ” defaultdict ìƒì„±ìì— ì „ë‹¬í•œ í•¨ìˆ˜ëŠ” ì¸ìë¥¼ ë°›ì„ ìˆ˜ ì—†ë‹¤. ì´ë ‡ë“¯ setdefaultì™€ defaultdict ëª¨ë‘ í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° íŒŒì´ì¬ì€ ë‹¤ë¥¸ í•´ë²•ì„ ë‚´ì¥í•´ ì œê³µí•œë‹¤.

dict íƒ€ì…ì˜ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  `__missing__` íŠ¹ë³„ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´ í‚¤ê°€ ì—†ëŠ” ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ ì»¤ìŠ¤í…€í™”í•  ìˆ˜ ìˆë‹¤.

```python
class Pictures(dict):
    def __missing__(self, key):
        value = open_picture(key)
        self[key] = value
        return value

>>> pictures = Pictures()
>>> handle = pictures[path]
>>> handle.seek(0)
>>> image_data = handle.read()
```

picturers[path]ë¼ëŠ” ë”•ì…”ë„ˆë¦¬ ì ‘ê·¼ì—ì„œ pathê°€ ë”•ì…”ë„ˆë¦¬ì— ì—†ìœ¼ë©´ `__missing__` ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤. ì´ ë©”ì„œë“œëŠ” í‚¤ì— í•´ë‹¹í•˜ëŠ” ë””í´íŠ¸ ê°’ì„ ìƒì„±í•´ ë”•ì…”ë„ˆë¦¬ì— ë„£ì–´ì¤€ ë‹¤ìŒ í˜¸ì¶œí•œ ìª½ì— ê·¸ ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.
